@using DoAnTotNghiep.Models;
@model List<ProgramSemester>;
@{
    ViewData["Title"] = "KhungChuongTrinhKy";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var stt = 1;
}

<div class="l-navbar" id="nav-bar">
    <nav class="nav">
        <div>
            <a href="#" class="nav_logo m-l--10">
                <img src="~/images/logo.png" width="35px" height="35px" alt="">
                <span class="nav_logo-name">Quản lý sinh viên</span>
            </a>
            <div class="nav_list">
                <a href="@Url.Action("News", "Home")" class="nav_link">
                    <i title="Bảng tin" class='bx bx-home-alt-2'></i>
                    <span class="nav_name">Bảng tin</span>
                </a>
                <a href="@Url.Action("ChiaSeBieuMau", "Home")" class="nav_link">
                    <i title="Chia sẻ" class='bx bx-message-square-detail nav_icon'></i>
                    <span class="nav_name">Chia sẻ</span>
                </a>
                <div class="dropdown">
                    <button class="dropbtn">
                        <a href="@Url.Action("KetQuaHocTap", "Home")" class="nav_link">
                            <i title="Kết quả học tập" class='bx bx-clipboard'></i>
                            <span class="nav_name">Kết quả học tập</span>
                        </a>
                    </button>
                    <div class="dropdown-contnet dis-block">
                        <a href="@Url.Action("KetQuaThi", "Home")"><i title="Kết quả thi" class='bx bx-task'></i> Kết quả thi</a>
                        <a href="@Url.Action("TBChungTichLuy", "Home")"><i title="TB chung tích lũy" class='bx bx-task'></i> TB chung tích lũy</a>
                        <a href="@Url.Action("TBChungHocKy", "Home")"><i title="TB chung học kỳ" class='bx bx-task'></i> TB chung học kỳ</a>
                        <a href="@Url.Action("XetThuTotNghiep", "Home")"><i title="Xét thử tốt nghiệp" class='bx bx-task'></i> Xét thử tốt nghiệp</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="dropbtn">
                        <a href="@Url.Action("ThoiKhoaBieu", "Home")" class="nav_link">
                            <i title="Thời khóa biểu" class='bx bx-time-five'></i>
                            <span class="nav_name">Thời khóa biểu</span>
                        </a>
                    </button>
                    <div class="dropdown-contnet">
                        <a href="@Url.Action("LichGiangDay", "Home")"><i title="Lịch giảng dạy" class='bx bx-timer nav_icon_con'></i> Lịch giảng dạy</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="dropbtn">
                        <a href="@Url.Action("XemLichThi", "Home" )" class="nav_link">
                            <i title="Lịch thi" class='bx bx-calendar'></i>
                            <span class="nav_name">Lịch thi</span>
                        </a>
                    </button>
                    <div class="dropdown-contnet">
                        <a href="@Url.Action("KeHoachThi", "Home")"><i title="Kế hoạch thi theo lớp" class='bx bx-calendar-check'></i> Kế hoach thi theo lớp</a>
                    </div>
                </div>
                <a href="@Url.Action("LopHoc", "Home" )" class="nav_link">
                    <i title="Lớp Học" class='bx bxs-school'></i>
                    <span class="nav_name">Lớp học</span>
                </a>
                <a href="@Url.Action("CaNhan", "Home" )" class="nav_link">
                    <i title="Cá nhân" class='bx bx-user nav_icon'></i>
                    <span class="nav_name">Cá nhân</span>
                </a>
                <div class="dropdown">
                    <button class="dropbtn">
                        <a href="@Url.Action("DangKyHP", "Home" )" class="nav_link active">
                            <i title="Đăng ký học phần" class='bx bx-bookmark nav_icon'></i>
                            <span class="nav_name">Đăng ký học phần</span>
                        </a>
                    </button>
                    <div class="dropdown-contnet dis-block">
                        <a href="@Url.Action("TinhHinhDangKyHP", "Home")"><i title="Tình hình ĐK học phần" class='bx bxs-bookmark'></i> Tình hình ĐK học phần</a>
                        <a href="@Url.Action("KhungChuongTrinh", "Home")"><i title="Khung chương trình" class='bx bxs-book-bookmark'></i> Khung chương trình</a>
                        <a href="@Url.Action("KhungChuongTrinhKy", "Home")"><i title="Khung chương trình (Kỳ)" class='bx bxs-book-bookmark'></i> Khung chương trình (Kỳ)</a>
                    </div>
                </div>
                <a href="@Url.Action("DanhGiaRenLuyen", "Home" )" class="nav_link">
                    <i title="Đánh giá rèn luyện" class='bx bx-bar-chart-alt-2 nav_icon'></i>
                    <span class="nav_name">Đánh giá rèn luyện</span>
                </a>
                @*                <a href="#" class="nav_link">
                <i class='bx bx-log-out nav_icon'></i>
                <span class="nav_name">Đăng xuất</span>
                </a>*@
            </div>
        </div>
    </nav>
</div>
<!--Container Main start-->
<div class="border-page">
    <div class="Khung-CTK">
        <p class="title-page">Khung chương trình @ViewBag.StudentInfo.CourseName -  @ViewBag.StudentInfo.IndustryName</p>
        <div class="title-line"></div>
        <div class="table-CTKhung">
            <table style="width:100% ;padding-left: 4px">
                <thead>
                    <tr>
                        <th style="width:2%;">STT</th>
                        <th style="width:5%;">Tên học kỳ</th>
                        <th style="width:6%;">Tổng số tín chỉ</th>
                        <th>Danh sách các học phần trong kỳ</th>
                    </tr>
                </thead>
                <tbody>
                    @for (var i = 0; i < 12; i++)
                    {
                        <tr>
                            <td>@(stt)</td>
                            <td>Học kỳ @(stt)</td>
                            <td>@(Model.Where(x => x.SemesterID == stt).Count()>0?Model.Where(x => x.SemesterID == stt).ToList()[0].CreditsS:0)</td>
                            <td>
                                <div class="table-con">
                                    <table style="width:100%; margin-top: 5px;">
                                        <thead>
                                            <tr>
                                                <!-- Hàng 1-->
                                                <th style="width:3%" rowspan="2">STT</th>
                                                <th style="width:7%" rowspan="2">Mã học phần</th>
                                                <th rowspan="2">Tên học phần</th>
                                                <th style="width:6%" colspan="4">Số tín chỉ</th>
                                                <th colspan="3">Số tiết</th>
                                                <th style="width:9%" rowspan="2">Số lớp đã tạo</th>
                                                <th style="width:8%" rowspan="2">Ghi chú</th>
                                                <th style="width:7%" rowspan="2">Chi tiết</th>
                                            </tr>
                                            <tr class="clo-2">
                                                <td style="width:5%">Tổng</td>
                                                <td style="width:7%">Lý thuyết</td>
                                                <td style="width:8%">Thực hành</td>
                                                <td style="width:5%">Khác</td>
                                                <td style="width:7%">Lý thuyết</td>
                                                <td style="width:8%">Thực hành</td>
                                                <td style="width:5%">Khác</td>
                                            </tr>
                                        </thead>
                                        <tr>
                                            <td colspan="3"><strong>Học phần bắt buộc</strong></td>
                                            <td><strong>@(Model.Where(x => x.SemesterID == stt).Count() > 0 ? Model.Where(x => x.SemesterID == stt).ToList()[0].Credits0 : 0)</strong></td>
                                            <td colspan="3"></td>
                                            <td colspan="3"></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        @{
                                            var sttbb = 1;
                                            var stttc = 1;
                                        }
                                        @foreach (var item in Model.Where(x => x.SemesterID == stt).ToList().Where(x => x.ProgramGroupID == 0))
                                        {
                                            <tr>
                                                <td>@(sttbb++)</td>
                                                <td>@item.ModulesCode</td>
                                                <td>@item.ModulesName</td>
                                                <td>@item.Credits</td>
                                                <td>@item.CreditsLT</td>
                                                <td>@item.CreditsTH</td>
                                                <td>@item.CreditsK</td>
                                                <td>@item.TimesLT</td>
                                                <td>@item.TimesTH</td>
                                                <td>@item.TimesK</td>
                                                <td>@item.CreatedClass</td>
                                                @if(item.ModulesTypeID == 6)
                                                {
                                                    <td> *(Tự chọn)</td>
                                                }
                                                else if (item.ModulesTypeID == 8){
                                                    <td> **</td>
                                                }else if (item.ModulesTypeID == 7)
                                                {
                                                    <td> *</td>
                                                }else if (item.ModulesTypeID == 2)
                                                {
                                                    <td> (Tự chọn)</td>
                                                }
                                                else{
                                                    <td></td>
                                                }

                                                <td><a href="@Url.Action("ChiTietChuongTrinh", "Home" , new {ModulesID=item.ModulesID})">[Chi tiết]</a></td>
                                            </tr>
                                        }

                                        <tr>
                                            <td colspan="3"><strong>Học phần Tự chọn</strong></td>
                                            <td><strong>@(Model.Where(x => x.SemesterID == stt).Count() > 0 ? Model.Where(x => x.SemesterID == stt).ToList()[0].Credits1 : 0)</strong></td>
                                            <td colspan="3"></td>
                                            <td colspan="3"></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        @foreach (var item in Model.Where(x => x.SemesterID == stt).ToList().Where(x => x.ProgramGroupID != 0))
                                        {
                                        <tr>
                                            <td>@(stttc++)</td>
                                                <td>@item.ModulesCode</td>
                                                <td>@item.ModulesName</td>
                                                <td>@item.Credits</td>
                                                <td>@item.CreditsLT</td>
                                                <td>@item.CreditsTH</td>
                                                <td>@item.CreditsK</td>
                                                <td>@item.TimesLT</td>
                                                <td>@item.TimesTH</td>
                                                <td>@item.TimesK</td>
                                                <td>@item.CreatedClass</td>
                                                @if (item.ModulesTypeID == 6)
                                                {
                                                    <td> *(Tự chọn)</td>
                                                }
                                                else if (item.ModulesTypeID == 8)
                                                {
                                                    <td> **</td>
                                                }
                                                else if (item.ModulesTypeID == 7)
                                                {
                                                    <td> *</td>
                                                }
                                                else if (item.ModulesTypeID == 2)
                                                {
                                                    <td> (Tự chọn)</td>
                                                }
                                                else
                                                {
                                                    <td></td>
                                                }

                                                <td><a href="@Url.Action("ChiTietChuongTrinh", "Home" , new {ModulesID=item.ModulesID})">[Chi tiết]</a></td>
                                        </tr>}
                                    </table>
                                </div>
                            </td>
                        </tr>
                        stt++;
                    }

                </tbody>
            </table>
        </div>
    </div>
</div>

